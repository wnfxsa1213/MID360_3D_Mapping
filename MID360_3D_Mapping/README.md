# MID360 3D 建图系统

基于Livox MID360激光雷达和Fast-LIO2算法的实时三维点云建图系统。本项目提供了一个完整的解决方案，用于采集、处理和可视化MID360激光雷达数据，并构建高精度的三维地图。

## 功能特点

- **实时点云处理**：10Hz点云帧率，支持20万点/秒的高密度点云数据
- **IMU融合定位**：利用内置ICM40609 IMU数据提高定位和建图精度
- **可视化界面**：基于Qt和PCL的直观用户界面，支持点云渲染和轨迹显示
- **地图管理**：支持保存、加载和清除三维地图
- **参数配置**：提供灵活的参数配置选项，适应不同场景需求

## 最新优化

### IMU静止检测与零速校正

针对静止场景下点云累积误差问题，我们实现了IMU静止检测与零速校正(ZUPT)功能：

- **静止检测算法**：通过监测加速度和角速度的变化量，精确判断设备是否处于静止状态
- **零速校正**：当检测到静止状态时，自动将角速度置零，加速度仅保留重力分量，有效抑制噪声累积
- **参数优化**：专为ICM40609 IMU优化的阈值参数，提供稳定可靠的静止判断

### 性能优化

- **增强滤波**：IMU数据10点移动平均滤波，有效降低噪声影响
- **自适应刷新率**：可视化渲染从10fps自动提升至30fps，兼顾启动速度和流畅体验
- **降采样优化**：全局地图使用体素网格降采样，减少内存占用，提高渲染效率
- **降低更新频率**：全局地图每5帧更新一次，大幅降低资源占用

## 系统要求

- **操作系统**：Windows 10/11 64位
- **开发环境**：
  - Qt 6.x
  - PCL 1.12+
  - Eigen 3.4+
  - Boost 1.78+
  - CMake 3.25+
  - Visual Studio 2022 (MSVC 14.3+)
- **硬件要求**：
  - CPU: 4核心8线程及以上
  - 内存: 8GB及以上
  - 支持OpenGL 4.x的显卡
  - 以太网接口(用于连接MID360)

## 使用方法

1. **连接设备**：将MID360激光雷达通过以太网线连接到计算机
2. **启动程序**：运行MID360_3D_Mapping.exe
3. **配置参数**：点击"配置参数"，设置适合您场景的参数
4. **开始扫描**：点击"开始扫描"按钮
5. **可视化操作**：
   - 鼠标左键：旋转视图
   - Shift+左键：平移视图
   - 鼠标滚轮：缩放视图
   - R键：重置视图
6. **地图管理**：
   - 点击"保存地图"按钮保存当前地图到PCD文件
   - 点击"加载地图"按钮加载已有地图文件
   - 点击"清除地图"按钮清空当前地图

## 配置文件说明

配置文件位于`config/mid360_config.json`，主要参数包括：

```json
{
  "Lidar": {
    "device_type": "MID360",
    "ip_addr": "192.168.1.100",
    "data_port": 60001,
    "imu_port": 60002
  },
  "FastLio": {
    "map_resolution": 0.2,
    "use_imu_data": true,
    "thread_num": 4
  }
}
```

## 已知问题与解决方案

- **点云累积误差**：静止时如仍有轻微漂移，可尝试调整IMU静止检测阈值
- **连接失败**：请检查IP地址配置和网络连接是否正确
- **性能问题**：低配置电脑可将`map_resolution`调整为0.3-0.5，减少计算量

## 开发团队

MID360 3D建图系统由[您的团队名称]开发，基于Livox SDK2和FAST-LIO2开源项目。

## 许可证

本项目采用[许可证类型]开源许可。 